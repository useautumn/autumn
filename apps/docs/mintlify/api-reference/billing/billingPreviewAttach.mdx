---
title: "Billing Preview Attach"
openapi: "openapi POST /v1/billing.preview_attach"
---

import { DynamicParamField } from "/components/dynamic-param-field.jsx";
import { DynamicResponseField } from "/components/dynamic-response-field.jsx";
import { DynamicResponseExample } from "/components/dynamic-response-example.jsx";

### Body Parameters

<DynamicParamField body="customer_id" type="string" required>
  The ID of the customer to attach the plan to.
</DynamicParamField>

<DynamicParamField body="entity_id" type="string | null">
  The ID of the entity to attach the plan to.
</DynamicParamField>

<DynamicParamField body="feature_quantities" type="object[] | null">
  If this plan contains prepaid features, use this field to specify the quantity of each prepaid feature. This quantity includes the included amount and billing units defined when setting up the plan.
  <Expandable title="properties">
    <DynamicParamField body="feature_id" type="string" required />

    <DynamicParamField body="quantity" type="number" />

    <DynamicParamField body="adjustable" type="boolean" />

  </Expandable>
</DynamicParamField>

<DynamicParamField body="version" type="number" />

<DynamicParamField body="free_trial" type="object | null">
  <Expandable title="properties">
    <DynamicParamField body="duration_length" type="number" required />

    <DynamicParamField body="duration_type" type="'day' | 'month' | 'year'" />

    <DynamicParamField body="card_required" type="boolean" />

  </Expandable>
</DynamicParamField>

<DynamicParamField body="customize" type="object">
  <Expandable title="properties">
    <DynamicParamField body="price" type="object | null">
      <Expandable title="properties">
        <DynamicParamField body="amount" type="number" required />

        <DynamicParamField body="interval" type="'one_off' | 'week' | 'month' | 'quarter' | 'semi_annual' | 'year'" required />

        <DynamicParamField body="interval_count" type="number" />

      </Expandable>
    </DynamicParamField>

    <DynamicParamField body="items" type="object[]">
      <Expandable title="properties">
        <DynamicParamField body="feature_id" type="string" required />

        <DynamicParamField body="included" type="number" />

        <DynamicParamField body="unlimited" type="boolean" />

        <DynamicParamField body="reset" type="object">
          <Expandable title="properties">
            <DynamicParamField body="interval" type="'one_off' | 'minute' | 'hour' | 'day' | 'week' | 'month' | 'quarter' | 'semi_annual' | 'year'" required />

            <DynamicParamField body="interval_count" type="number" />

          </Expandable>
        </DynamicParamField>

        <DynamicParamField body="price" type="object">
          <Expandable title="properties">
            <DynamicParamField body="amount" type="number" />

            <DynamicParamField body="tiers" type="object[]">
              <Expandable title="properties">
                <DynamicParamField body="to" type="number" required />

                <DynamicParamField body="amount" type="number" required />

              </Expandable>
            </DynamicParamField>

            <DynamicParamField body="interval" type="'one_off' | 'week' | 'month' | 'quarter' | 'semi_annual' | 'year'" required />

            <DynamicParamField body="interval_count" type="number" />

            <DynamicParamField body="billing_units" type="number" />

            <DynamicParamField body="billing_method" type="'prepaid' | 'usage_based'" required />

            <DynamicParamField body="max_purchase" type="number" />

          </Expandable>
        </DynamicParamField>

        <DynamicParamField body="proration" type="object">
          <Expandable title="properties">
            <DynamicParamField body="on_increase" type="'bill_immediately' | 'prorate_immediately' | 'prorate_next_cycle' | 'bill_next_cycle'" required />

            <DynamicParamField body="on_decrease" type="'prorate' | 'prorate_immediately' | 'prorate_next_cycle' | 'none' | 'no_prorations'" required />

          </Expandable>
        </DynamicParamField>

        <DynamicParamField body="rollover" type="object">
          <Expandable title="properties">
            <DynamicParamField body="max" type="number" />

            <DynamicParamField body="expiry_duration_type" type="'month' | 'forever'" required />

            <DynamicParamField body="expiry_duration_length" type="number" />

          </Expandable>
        </DynamicParamField>

      </Expandable>
    </DynamicParamField>

  </Expandable>
</DynamicParamField>

<DynamicParamField body="plan_id" type="string" required />

<DynamicParamField body="invoice_mode" type="object">
  <Expandable title="properties">
    <DynamicParamField body="enabled" type="boolean" required />

    <DynamicParamField body="enable_product_immediately" type="boolean" />

    <DynamicParamField body="finalize_invoice" type="boolean" />

  </Expandable>
</DynamicParamField>

<DynamicParamField body="discounts" type="object[]" />

<DynamicParamField body="redirect_mode" type="'always' | 'if_required' | 'never'" />

<DynamicParamField body="success_url" type="string" />

<DynamicParamField body="new_billing_subscription" type="boolean" />

<DynamicParamField body="plan_schedule" type="'immediate' | 'end_of_cycle'" />

<DynamicParamField body="billing_behavior" type="'prorate_immediately' | 'next_cycle_only'" />


### Response

<DynamicResponseField name="customer_id" type="string" />

<DynamicResponseField name="line_items" type="object[]">
  <Expandable title="properties">
    <DynamicResponseField name="title" type="string" />

    <DynamicResponseField name="description" type="string" />

    <DynamicResponseField name="amount" type="number" />

    <DynamicResponseField name="discounts" type="object[]">
      <Expandable title="properties">
        <DynamicResponseField name="amountOff" type="number" />

        <DynamicResponseField name="percentOff" type="number" />

        <DynamicResponseField name="stripeCouponId" type="string" />

        <DynamicResponseField name="couponName" type="string" />

      </Expandable>
    </DynamicResponseField>

    <DynamicResponseField name="is_base" type="boolean" />

    <DynamicResponseField name="total_quantity" type="number" />

    <DynamicResponseField name="paid_quantity" type="number" />

    <DynamicResponseField name="plan_id" type="string" />

    <DynamicResponseField name="deferred_for_trial" type="boolean" />

    <DynamicResponseField name="effective_period" type="object">
      <Expandable title="properties">
        <DynamicResponseField name="start" type="number" />

        <DynamicResponseField name="end" type="number" />

      </Expandable>
    </DynamicResponseField>

  </Expandable>
</DynamicResponseField>

<DynamicResponseField name="total" type="number" />

<DynamicResponseField name="currency" type="string" />

<DynamicResponseField name="period_start" type="number" />

<DynamicResponseField name="period_end" type="number" />

<DynamicResponseField name="credit" type="object">
  <Expandable title="properties">
    <DynamicResponseField name="amount" type="number" />

    <DynamicResponseField name="description" type="string" />

  </Expandable>
</DynamicResponseField>

<DynamicResponseField name="next_cycle" type="object">
  <Expandable title="properties">
    <DynamicResponseField name="starts_at" type="number" />

    <DynamicResponseField name="total" type="number" />

    <DynamicResponseField name="line_items" type="object[]">
      <Expandable title="properties">
        <DynamicResponseField name="title" type="string" />

        <DynamicResponseField name="description" type="string" />

        <DynamicResponseField name="amount" type="number" />

        <DynamicResponseField name="discounts" type="object[]">
          <Expandable title="properties">
            <DynamicResponseField name="amountOff" type="number" />

            <DynamicResponseField name="percentOff" type="number" />

            <DynamicResponseField name="stripeCouponId" type="string" />

            <DynamicResponseField name="couponName" type="string" />

          </Expandable>
        </DynamicResponseField>

        <DynamicResponseField name="is_base" type="boolean" />

        <DynamicResponseField name="total_quantity" type="number" />

        <DynamicResponseField name="paid_quantity" type="number" />

        <DynamicResponseField name="plan_id" type="string" />

        <DynamicResponseField name="deferred_for_trial" type="boolean" />

        <DynamicResponseField name="effective_period" type="object">
          <Expandable title="properties">
            <DynamicResponseField name="start" type="number" />

            <DynamicResponseField name="end" type="number" />

          </Expandable>
        </DynamicResponseField>

      </Expandable>
    </DynamicResponseField>

  </Expandable>
</DynamicResponseField>

<DynamicResponseField name="incoming" type="object[]">
  <Expandable title="properties">
    <DynamicResponseField name="plan" type="object">
      <Expandable title="properties">
        <DynamicResponseField name="id" type="string" />

        <DynamicResponseField name="name" type="string" />

        <DynamicResponseField name="description" type="string | null" />

        <DynamicResponseField name="group" type="string | null" />

        <DynamicResponseField name="version" type="number" />

        <DynamicResponseField name="add_on" type="boolean" />

        <DynamicResponseField name="auto_enable" type="boolean" />

        <DynamicResponseField name="price" type="object | null">
          <Expandable title="properties">
            <DynamicResponseField name="amount" type="number" />

            <DynamicResponseField name="interval" type="'one_off' | 'week' | 'month' | 'quarter' | 'semi_annual' | 'year'" />

            <DynamicResponseField name="interval_count" type="number" />

            <DynamicResponseField name="display" type="object">
              <Expandable title="properties">
                <DynamicResponseField name="primary_text" type="string" />

                <DynamicResponseField name="secondary_text" type="string" />

              </Expandable>
            </DynamicResponseField>

          </Expandable>
        </DynamicResponseField>

        <DynamicResponseField name="items" type="object[]">
          <Expandable title="properties">
            <DynamicResponseField name="feature_id" type="string" />

            <DynamicResponseField name="feature" type="object">
              <Expandable title="properties">
                <DynamicResponseField name="id" type="string">
                  The ID of the feature, used to refer to it in other API calls like /track or /check.
                </DynamicResponseField>

                <DynamicResponseField name="name" type="string | null">
                  The name of the feature.
                </DynamicResponseField>

                <DynamicResponseField name="type" type="'static' | 'boolean' | 'single_use' | 'continuous_use' | 'credit_system'">
                  The type of the feature
                </DynamicResponseField>

                <DynamicResponseField name="display" type="object | null">
                  Singular and plural display names for the feature.
                  <Expandable title="properties">
                    <DynamicResponseField name="singular" type="string">
                      The singular display name for the feature.
                    </DynamicResponseField>

                    <DynamicResponseField name="plural" type="string">
                      The plural display name for the feature.
                    </DynamicResponseField>

                  </Expandable>
                </DynamicResponseField>

                <DynamicResponseField name="credit_schema" type="object[] | null">
                  Credit cost schema for credit system features.
                  <Expandable title="properties">
                    <DynamicResponseField name="metered_feature_id" type="string">
                      The ID of the metered feature (should be a single_use feature).
                    </DynamicResponseField>

                    <DynamicResponseField name="credit_cost" type="number">
                      The credit cost of the metered feature.
                    </DynamicResponseField>

                  </Expandable>
                </DynamicResponseField>

                <DynamicResponseField name="archived" type="boolean | null">
                  Whether or not the feature is archived.
                </DynamicResponseField>

              </Expandable>
            </DynamicResponseField>

            <DynamicResponseField name="included" type="number" />

            <DynamicResponseField name="unlimited" type="boolean" />

            <DynamicResponseField name="reset" type="object | null">
              <Expandable title="properties">
                <DynamicResponseField name="interval" type="'one_off' | 'minute' | 'hour' | 'day' | 'week' | 'month' | 'quarter' | 'semi_annual' | 'year'" />

                <DynamicResponseField name="interval_count" type="number" />

              </Expandable>
            </DynamicResponseField>

            <DynamicResponseField name="price" type="object | null">
              <Expandable title="properties">
                <DynamicResponseField name="amount" type="number" />

                <DynamicResponseField name="tiers" type="object[]">
                  <Expandable title="properties">
                    <DynamicResponseField name="to" type="number" />

                    <DynamicResponseField name="amount" type="number" />

                  </Expandable>
                </DynamicResponseField>

                <DynamicResponseField name="interval" type="'one_off' | 'week' | 'month' | 'quarter' | 'semi_annual' | 'year'" />

                <DynamicResponseField name="interval_count" type="number" />

                <DynamicResponseField name="billing_units" type="number" />

                <DynamicResponseField name="billing_method" type="'prepaid' | 'usage_based'" />

                <DynamicResponseField name="max_purchase" type="number | null" />

              </Expandable>
            </DynamicResponseField>

            <DynamicResponseField name="display" type="object">
              <Expandable title="properties">
                <DynamicResponseField name="primary_text" type="string" />

                <DynamicResponseField name="secondary_text" type="string" />

              </Expandable>
            </DynamicResponseField>

            <DynamicResponseField name="rollover" type="object">
              <Expandable title="properties">
                <DynamicResponseField name="max" type="number | null" />

                <DynamicResponseField name="expiry_duration_type" type="'month' | 'forever'" />

                <DynamicResponseField name="expiry_duration_length" type="number" />

              </Expandable>
            </DynamicResponseField>

            <DynamicResponseField name="proration" type="object">
              <Expandable title="properties">
                <DynamicResponseField name="on_increase" type="'bill_immediately' | 'prorate_immediately' | 'prorate_next_cycle' | 'bill_next_cycle'" />

                <DynamicResponseField name="on_decrease" type="'prorate' | 'prorate_immediately' | 'prorate_next_cycle' | 'none' | 'no_prorations'" />

              </Expandable>
            </DynamicResponseField>

          </Expandable>
        </DynamicResponseField>

        <DynamicResponseField name="free_trial" type="object">
          <Expandable title="properties">
            <DynamicResponseField name="duration_length" type="number" />

            <DynamicResponseField name="duration_type" type="'day' | 'month' | 'year'" />

            <DynamicResponseField name="card_required" type="boolean" />

          </Expandable>
        </DynamicResponseField>

        <DynamicResponseField name="created_at" type="number" />

        <DynamicResponseField name="env" type="'sandbox' | 'live'" />

        <DynamicResponseField name="archived" type="boolean" />

        <DynamicResponseField name="base_variant_id" type="string | null" />

        <DynamicResponseField name="customer_eligibility" type="object">
          <Expandable title="properties">
            <DynamicResponseField name="trial_available" type="boolean" />

            <DynamicResponseField name="scenario" type="'scheduled' | 'active' | 'new' | 'renew' | 'upgrade' | 'downgrade' | 'cancel' | 'expired' | 'past_due'" />

          </Expandable>
        </DynamicResponseField>

      </Expandable>
    </DynamicResponseField>

    <DynamicResponseField name="feature_quantities" type="object[]">
      <Expandable title="properties">
        <DynamicResponseField name="feature_id" type="string" />

        <DynamicResponseField name="quantity" type="number" />

      </Expandable>
    </DynamicResponseField>

    <DynamicResponseField name="balances" type="object" />

    <DynamicResponseField name="period_start" type="number" />

    <DynamicResponseField name="period_end" type="number" />

  </Expandable>
</DynamicResponseField>

<DynamicResponseField name="outgoing" type="object[]">
  <Expandable title="properties">
    <DynamicResponseField name="plan" type="object">
      <Expandable title="properties">
        <DynamicResponseField name="id" type="string" />

        <DynamicResponseField name="name" type="string" />

        <DynamicResponseField name="description" type="string | null" />

        <DynamicResponseField name="group" type="string | null" />

        <DynamicResponseField name="version" type="number" />

        <DynamicResponseField name="add_on" type="boolean" />

        <DynamicResponseField name="auto_enable" type="boolean" />

        <DynamicResponseField name="price" type="object | null">
          <Expandable title="properties">
            <DynamicResponseField name="amount" type="number" />

            <DynamicResponseField name="interval" type="'one_off' | 'week' | 'month' | 'quarter' | 'semi_annual' | 'year'" />

            <DynamicResponseField name="interval_count" type="number" />

            <DynamicResponseField name="display" type="object">
              <Expandable title="properties">
                <DynamicResponseField name="primary_text" type="string" />

                <DynamicResponseField name="secondary_text" type="string" />

              </Expandable>
            </DynamicResponseField>

          </Expandable>
        </DynamicResponseField>

        <DynamicResponseField name="items" type="object[]">
          <Expandable title="properties">
            <DynamicResponseField name="feature_id" type="string" />

            <DynamicResponseField name="feature" type="object">
              <Expandable title="properties">
                <DynamicResponseField name="id" type="string">
                  The ID of the feature, used to refer to it in other API calls like /track or /check.
                </DynamicResponseField>

                <DynamicResponseField name="name" type="string | null">
                  The name of the feature.
                </DynamicResponseField>

                <DynamicResponseField name="type" type="'static' | 'boolean' | 'single_use' | 'continuous_use' | 'credit_system'">
                  The type of the feature
                </DynamicResponseField>

                <DynamicResponseField name="display" type="object | null">
                  Singular and plural display names for the feature.
                  <Expandable title="properties">
                    <DynamicResponseField name="singular" type="string">
                      The singular display name for the feature.
                    </DynamicResponseField>

                    <DynamicResponseField name="plural" type="string">
                      The plural display name for the feature.
                    </DynamicResponseField>

                  </Expandable>
                </DynamicResponseField>

                <DynamicResponseField name="credit_schema" type="object[] | null">
                  Credit cost schema for credit system features.
                  <Expandable title="properties">
                    <DynamicResponseField name="metered_feature_id" type="string">
                      The ID of the metered feature (should be a single_use feature).
                    </DynamicResponseField>

                    <DynamicResponseField name="credit_cost" type="number">
                      The credit cost of the metered feature.
                    </DynamicResponseField>

                  </Expandable>
                </DynamicResponseField>

                <DynamicResponseField name="archived" type="boolean | null">
                  Whether or not the feature is archived.
                </DynamicResponseField>

              </Expandable>
            </DynamicResponseField>

            <DynamicResponseField name="included" type="number" />

            <DynamicResponseField name="unlimited" type="boolean" />

            <DynamicResponseField name="reset" type="object | null">
              <Expandable title="properties">
                <DynamicResponseField name="interval" type="'one_off' | 'minute' | 'hour' | 'day' | 'week' | 'month' | 'quarter' | 'semi_annual' | 'year'" />

                <DynamicResponseField name="interval_count" type="number" />

              </Expandable>
            </DynamicResponseField>

            <DynamicResponseField name="price" type="object | null">
              <Expandable title="properties">
                <DynamicResponseField name="amount" type="number" />

                <DynamicResponseField name="tiers" type="object[]">
                  <Expandable title="properties">
                    <DynamicResponseField name="to" type="number" />

                    <DynamicResponseField name="amount" type="number" />

                  </Expandable>
                </DynamicResponseField>

                <DynamicResponseField name="interval" type="'one_off' | 'week' | 'month' | 'quarter' | 'semi_annual' | 'year'" />

                <DynamicResponseField name="interval_count" type="number" />

                <DynamicResponseField name="billing_units" type="number" />

                <DynamicResponseField name="billing_method" type="'prepaid' | 'usage_based'" />

                <DynamicResponseField name="max_purchase" type="number | null" />

              </Expandable>
            </DynamicResponseField>

            <DynamicResponseField name="display" type="object">
              <Expandable title="properties">
                <DynamicResponseField name="primary_text" type="string" />

                <DynamicResponseField name="secondary_text" type="string" />

              </Expandable>
            </DynamicResponseField>

            <DynamicResponseField name="rollover" type="object">
              <Expandable title="properties">
                <DynamicResponseField name="max" type="number | null" />

                <DynamicResponseField name="expiry_duration_type" type="'month' | 'forever'" />

                <DynamicResponseField name="expiry_duration_length" type="number" />

              </Expandable>
            </DynamicResponseField>

            <DynamicResponseField name="proration" type="object">
              <Expandable title="properties">
                <DynamicResponseField name="on_increase" type="'bill_immediately' | 'prorate_immediately' | 'prorate_next_cycle' | 'bill_next_cycle'" />

                <DynamicResponseField name="on_decrease" type="'prorate' | 'prorate_immediately' | 'prorate_next_cycle' | 'none' | 'no_prorations'" />

              </Expandable>
            </DynamicResponseField>

          </Expandable>
        </DynamicResponseField>

        <DynamicResponseField name="free_trial" type="object">
          <Expandable title="properties">
            <DynamicResponseField name="duration_length" type="number" />

            <DynamicResponseField name="duration_type" type="'day' | 'month' | 'year'" />

            <DynamicResponseField name="card_required" type="boolean" />

          </Expandable>
        </DynamicResponseField>

        <DynamicResponseField name="created_at" type="number" />

        <DynamicResponseField name="env" type="'sandbox' | 'live'" />

        <DynamicResponseField name="archived" type="boolean" />

        <DynamicResponseField name="base_variant_id" type="string | null" />

        <DynamicResponseField name="customer_eligibility" type="object">
          <Expandable title="properties">
            <DynamicResponseField name="trial_available" type="boolean" />

            <DynamicResponseField name="scenario" type="'scheduled' | 'active' | 'new' | 'renew' | 'upgrade' | 'downgrade' | 'cancel' | 'expired' | 'past_due'" />

          </Expandable>
        </DynamicResponseField>

      </Expandable>
    </DynamicResponseField>

    <DynamicResponseField name="feature_quantities" type="object[]">
      <Expandable title="properties">
        <DynamicResponseField name="feature_id" type="string" />

        <DynamicResponseField name="quantity" type="number" />

      </Expandable>
    </DynamicResponseField>

    <DynamicResponseField name="balances" type="object" />

    <DynamicResponseField name="period_start" type="number" />

    <DynamicResponseField name="period_end" type="number" />

  </Expandable>
</DynamicResponseField>

<DynamicResponseField name="redirect_type" type="'stripe_checkout' | 'autumn_checkout'" />
