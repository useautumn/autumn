overlay: 1.0.0
info:
  title: CodeSamples overlay for typescript target
  version: 0.0.0
actions:
  - target: $["paths"]["/v1/attach"]["post"]
    update:
      x-codeSamples:
        - lang: typescript
          label: Typescript (SDK)
          source: |-
            import { Autumn } from "@useautumn/sdk";

            const autumn = new Autumn({
              xApiVersion: "2.1",
              secretKey: process.env["AUTUMN_SECRET_KEY"] ?? "",
            });

            async function run() {
              const result = await autumn.billing.attach({
                productId: "<id>",
              });

              console.log(result);
            }

            run();
  - target: $["paths"]["/v1/customers.getOrCreate"]["post"]
    update:
      x-codeSamples:
        - lang: typescript
          label: Typescript (SDK)
          source: |-
            import { Autumn } from "@useautumn/sdk";

            const autumn = new Autumn({
              xApiVersion: "2.1",
              secretKey: process.env["AUTUMN_SECRET_KEY"] ?? "",
            });

            async function run() {
              const result = await autumn.customers.getOrCreate({
                customerId: "cus_123",
                name: "John Doe",
                email: "john@example.com",
              });

              console.log(result);
            }

            run();
  - target: $["paths"]["/v1/products"]["get"]
    update:
      x-codeSamples:
        - lang: typescript
          label: Typescript (SDK)
          source: |-
            import { Autumn } from "@useautumn/sdk";

            const autumn = new Autumn({
              xApiVersion: "2.1",
              secretKey: process.env["AUTUMN_SECRET_KEY"] ?? "",
            });

            async function run() {
              const result = await autumn.plans.list();

              console.log(result);
            }

            run();
