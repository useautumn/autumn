/*
 * Code generated by Speakeasy (https://speakeasy.com). DO NOT EDIT.
 */

import { plansCreate } from "../funcs/plans-create.js";
import { plansDelete } from "../funcs/plans-delete.js";
import { plansGet } from "../funcs/plans-get.js";
import { plansList } from "../funcs/plans-list.js";
import { plansUpdate } from "../funcs/plans-update.js";
import { ClientSDK, RequestOptions } from "../lib/sdks.js";
import * as models from "../models/index.js";
import { unwrapAsync } from "../types/fp.js";

export class Plans extends ClientSDK {
  /**
   * Create a plan
   *
   * @remarks
   * Creates a new plan with optional base price and feature configurations.
   *
   * Use this to programmatically create pricing plans. See [How plans work](/documentation/pricing/plans) for concepts.
   *
   * @example
   * ```typescript
   * // Create a free plan with limited features
   * const response = await client.plans.create({
   *   planId: "free_plan",
   *   name: "Free",
   *   autoEnable: true,
   *   items: [{"featureId":"messages","included":100,"reset":{"interval":"month"}}],
   * });
   * ```
   *
   * @example
   * ```typescript
   * // Create a paid plan with base price and usage-based feature
   * const response = await client.plans.create({
   *   planId: "pro_plan",
   *   name: "Pro Plan",
   *   price: {"amount":10,"interval":"month"},
   *   items: [{"featureId":"messages","included":1000,"reset":{"interval":"month"},"price":{"amount":0.01,"interval":"month","billingUnits":1,"billingMethod":"usage_based"}}],
   * });
   * ```
   *
   * @example
   * ```typescript
   * // Create a plan with prepaid seats
   * const response = await client.plans.create({
   *   planId: "team_plan",
   *   name: "Team Plan",
   *   price: {"amount":49,"interval":"month"},
   *   items: [{"featureId":"seats","included":5,"price":{"amount":10,"interval":"month","billingUnits":1,"billingMethod":"prepaid"}}],
   * });
   * ```
   *
   * @example
   * ```typescript
   * // Create an add-on plan
   * const response = await client.plans.create({
   *   planId: "analytics_addon",
   *   name: "Advanced Analytics",
   *   addOn: true,
   *   price: {"amount":20,"interval":"month"},
   * });
   * ```
   *
   * @example
   * ```typescript
   * // Create a plan with tiered pricing
   * const response = await client.plans.create({ planId: "api_plan", name: "API Plan", items: [{"featureId":"api_calls","included":1000,"reset":{"interval":"month"},"price":{"tiers":[{"to":10000,"amount":0.001},{"to":100000,"amount":0.0005},{"to":"inf","amount":0.0001}],"interval":"month","billingUnits":1,"billingMethod":"usage_based"}}] });
   * ```
   *
   * @example
   * ```typescript
   * // Create a plan with free trial
   * const response = await client.plans.create({
   *   planId: "premium_plan",
   *   name: "Premium",
   *   price: {"amount":99,"interval":"month"},
   *   freeTrial: {"durationLength":14,"durationType":"day","cardRequired":true},
   * });
   * ```
   *
   * @param planId - The ID of the plan to create.
   * @param group - Group identifier for organizing related plans. Plans in the same group are mutually exclusive. (optional)
   * @param name - Display name of the plan.
   * @param description - Optional description of the plan. (optional)
   * @param addOn - If true, this plan can be attached alongside other plans. Otherwise, attaching replaces existing plans in the same group. (optional)
   * @param autoEnable - If true, plan is automatically attached when a customer is created. Use for free tiers. (optional)
   * @param price - Base recurring price for the plan. Omit for free or usage-only plans. (optional)
   * @param items - Feature configurations for this plan. Each item defines included units, pricing, and reset behavior. (optional)
   * @param freeTrial - Free trial configuration. Customers can try this plan before being charged. (optional)
   *
   * @returns The created plan object.
   */
  async create(
    request: models.CreatePlanParams,
    options?: RequestOptions,
  ): Promise<models.CreatePlanResponse> {
    return unwrapAsync(plansCreate(
      this,
      request,
      options,
    ));
  }

  /**
   * Get a plan
   *
   * @remarks
   * Retrieves a single plan by its ID.
   *
   * Use this to fetch the full configuration of a specific plan, including its features and pricing.
   *
   * @example
   * ```typescript
   * // Get a plan by ID
   * const response = await client.plans.get({ planId: "pro_plan" });
   * ```
   *
   * @example
   * ```typescript
   * // Get a specific version of a plan
   * const response = await client.plans.get({ planId: "pro_plan", version: 2 });
   * ```
   *
   * @param planId - The ID of the plan to retrieve.
   * @param version - The version of the plan to get. Defaults to the latest version. (optional)
   *
   * @returns The plan object with its full configuration.
   */
  async get(
    request: models.GetPlanParams,
    options?: RequestOptions,
  ): Promise<models.GetPlanResponse> {
    return unwrapAsync(plansGet(
      this,
      request,
      options,
    ));
  }

  /**
   * List all plans
   *
   * @remarks
   * Lists all plans in the current environment.
   *
   * Use this to retrieve all plans for displaying pricing pages or managing plan configurations.
   *
   * @returns A list of all plans with their pricing and feature configurations.
   */
  async list(
    request?: models.ListPlansParams | undefined,
    options?: RequestOptions,
  ): Promise<models.ListPlansResponse> {
    return unwrapAsync(plansList(
      this,
      request,
      options,
    ));
  }

  /**
   * Update a plan
   *
   * @remarks
   * Updates an existing plan. Creates a new version unless `disableVersion` is set.
   *
   * Use this to modify plan properties, pricing, or feature configurations. See [Adding features to plans](/documentation/pricing/plan-features) for item configuration.
   *
   * @example
   * ```typescript
   * // Update plan name and price
   * const response = await client.plans.update({ planId: "pro_plan", name: "Pro Plan (Updated)", price: {"amount":15,"interval":"month"} });
   * ```
   *
   * @example
   * ```typescript
   * // Add a feature to an existing plan
   * const response = await client.plans.update({ planId: "pro_plan", items: [{"featureId":"messages","included":1000,"reset":{"interval":"month"}},{"featureId":"storage","included":10,"reset":{"interval":"month"}}] });
   * ```
   *
   * @example
   * ```typescript
   * // Remove the base price (make usage-only)
   * const response = await client.plans.update({ planId: "pro_plan", price: null });
   * ```
   *
   * @example
   * ```typescript
   * // Archive a plan
   * const response = await client.plans.update({ planId: "old_plan", archived: true });
   * ```
   *
   * @example
   * ```typescript
   * // Update feature's included amount
   * const response = await client.plans.update({ planId: "pro_plan", items: [{"featureId":"messages","included":2000,"reset":{"interval":"month"}}] });
   * ```
   *
   * @param planId - The ID of the plan to update.
   * @param group - Group identifier for organizing related plans. Plans in the same group are mutually exclusive. (optional)
   * @param name - Display name of the plan. (optional)
   * @param addOn - Whether the plan is an add-on. (optional)
   * @param autoEnable - Whether the plan is automatically enabled. (optional)
   * @param price - The price of the plan. Set to null to remove the base price. (optional)
   * @param items - Feature configurations for this plan. Each item defines included units, pricing, and reset behavior. (optional)
   * @param freeTrial - The free trial of the plan. Set to null to remove the free trial. (optional)
   * @param newPlanId - The new ID to use for the plan. Can only be updated if the plan has not been used by any customers. (optional)
   *
   * @returns The updated plan object.
   */
  async update(
    request: models.UpdatePlanParams,
    options?: RequestOptions,
  ): Promise<models.UpdatePlanResponse> {
    return unwrapAsync(plansUpdate(
      this,
      request,
      options,
    ));
  }

  /**
   * Delete a plan
   *
   * @remarks
   * Deletes a plan by its ID.
   *
   * Use this to permanently remove a plan. Plans with active customers cannot be deleted - archive them instead.
   *
   * @example
   * ```typescript
   * // Delete a plan
   * const response = await client.plans.delete({ planId: "unused_plan" });
   * ```
   *
   * @example
   * ```typescript
   * // Delete all versions of a plan
   * const response = await client.plans.delete({ planId: "legacy_plan", allVersions: true });
   * ```
   *
   * @param planId - The ID of the plan to delete.
   * @param allVersions - If true, deletes all versions of the plan. Otherwise, only deletes the latest version. (optional)
   *
   * @returns A success flag indicating the plan was deleted.
   */
  async delete(
    request: models.DeletePlanParams,
    options?: RequestOptions,
  ): Promise<models.DeletePlanResponse> {
    return unwrapAsync(plansDelete(
      this,
      request,
      options,
    ));
  }
}
