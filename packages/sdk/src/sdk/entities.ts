/*
 * Code generated by Speakeasy (https://speakeasy.com). DO NOT EDIT.
 */

import { entitiesCreate } from "../funcs/entities-create.js";
import { entitiesDelete } from "../funcs/entities-delete.js";
import { entitiesGet } from "../funcs/entities-get.js";
import { ClientSDK, RequestOptions } from "../lib/sdks.js";
import * as models from "../models/index.js";
import { unwrapAsync } from "../types/fp.js";

export class Entities extends ClientSDK {
  /**
   * Creates an entity for a customer and feature, then returns the entity with balances and subscriptions.
   *
   * Use entities when usage and access must be scoped to sub-resources (for example seats, projects, or workspaces) instead of only the customer.
   *
   * @example
   * ```typescript
   * // Create a seat entity
   * const response = await client.entities.create({
   *
   *   customerId: "cus_123",
   *   entityId: "seat_42",
   *   featureId: "seats",
   *   name: "Seat 42",
   * });
   * ```
   *
   * @param name - The name of the entity (optional)
   * @param featureId - The ID of the feature this entity is associated with
   * @param customerData - Customer attributes used to resolve the customer when customer_id is not provided. (optional)
   * @param customerId - The ID of the customer to create the entity for.
   * @param entityId - The ID of the entity.
   *
   * @returns The created entity object including its current subscriptions, purchases, and balances.
   */
  async create(
    request: models.CreateEntityParams,
    options?: RequestOptions,
  ): Promise<models.CreateEntityResponse> {
    return unwrapAsync(entitiesCreate(
      this,
      request,
      options,
    ));
  }

  /**
   * Fetches a single entity by entity ID.
   *
   * Use this to read one entity's current state. Pass customerId when you want to scope the lookup to a specific customer.
   *
   * @example
   * ```typescript
   * // Fetch a seat entity
   * const response = await client.entities.get({ entityId: "seat_42" });
   * ```
   *
   * @example
   * ```typescript
   * // Fetch a seat entity for a specific customer
   * const response = await client.entities.get({ customerId: "cus_123", entityId: "seat_42" });
   * ```
   *
   * @param customerId - The ID of the customer to create the entity for. (optional)
   * @param entityId - The ID of the entity.
   *
   * @returns The entity object including its current subscriptions, purchases, and balances.
   */
  async get(
    request: models.GetEntityParams,
    options?: RequestOptions,
  ): Promise<models.GetEntityResponse> {
    return unwrapAsync(entitiesGet(
      this,
      request,
      options,
    ));
  }

  /**
   * Deletes an entity by entity ID.
   *
   * Use this when the underlying resource is removed and you no longer want entity-scoped balances or subscriptions tracked for it.
   *
   * @example
   * ```typescript
   * // Delete a seat entity
   * const response = await client.entities.delete({ entityId: "seat_42" });
   * ```
   *
   * @param customerId - The ID of the customer. (optional)
   * @param entityId - The ID of the entity.
   *
   * @returns A success flag indicating the entity was deleted.
   */
  async delete(
    request: models.DeleteEntityParams,
    options?: RequestOptions,
  ): Promise<models.DeleteEntityResponse> {
    return unwrapAsync(entitiesDelete(
      this,
      request,
      options,
    ));
  }
}
