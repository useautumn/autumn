/*
 * Code generated by Speakeasy (https://speakeasy.com). DO NOT EDIT.
 */

import { customersDelete } from "../funcs/customers-delete.js";
import { customersGetOrCreate } from "../funcs/customers-get-or-create.js";
import { customersList } from "../funcs/customers-list.js";
import { customersUpdate } from "../funcs/customers-update.js";
import { ClientSDK, RequestOptions } from "../lib/sdks.js";
import * as models from "../models/index.js";
import { unwrapAsync } from "../types/fp.js";

export class Customers extends ClientSDK {
  /**
   * Creates a customer if they do not exist, or returns the existing customer by your external customer ID.
   *
   * Use this as the primary entrypoint before billing operations so the customer record is always present and up to date.
   *
   * @example
   * ```typescript
   * // Create or fetch a customer by external ID
   * const response = await client.getOrCreate({ customerId: "cus_123", name: "John Doe", email: "john@example.com" });
   * ```
   *
   * @param id - Your unique identifier for the customer (optional)
   * @param name - Customer's name (optional)
   * @param email - Customer's email address (optional)
   * @param fingerprint - Unique identifier (eg, serial number) to detect duplicate customers and prevent free trial abuse (optional)
   * @param metadata - Additional metadata for the customer (optional)
   * @param stripeId - Stripe customer ID if you already have one (optional)
   * @param createInStripe - Whether to create the customer in Stripe (optional)
   * @param autoEnablePlanId - The ID of the free plan to auto-enable for the customer (optional)
   * @param sendEmailReceipts - Whether to send email receipts to this customer (optional)
   * @param expand - Customer expand options (optional)
   */
  async getOrCreate(
    request: models.GetOrCreateCustomerParams,
    options?: RequestOptions,
  ): Promise<models.Customer> {
    return unwrapAsync(customersGetOrCreate(
      this,
      request,
      options,
    ));
  }

  /**
   * Lists customers with pagination and optional filters.
   */
  async list(
    request?: models.ListCustomersParams | undefined,
    options?: RequestOptions,
  ): Promise<models.ListCustomersResponse> {
    return unwrapAsync(customersList(
      this,
      request,
      options,
    ));
  }

  /**
   * Updates an existing customer by ID.
   */
  async update(
    request: models.UpdateCustomerParams,
    options?: RequestOptions,
  ): Promise<models.UpdateCustomerResponse> {
    return unwrapAsync(customersUpdate(
      this,
      request,
      options,
    ));
  }

  /**
   * Deletes a customer by ID.
   */
  async delete(
    request: models.DeleteCustomerParams,
    options?: RequestOptions,
  ): Promise<models.DeleteCustomerResponse> {
    return unwrapAsync(customersDelete(
      this,
      request,
      options,
    ));
  }
}
