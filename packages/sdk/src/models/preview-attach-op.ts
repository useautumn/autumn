/*
 * Code generated by Speakeasy (https://speakeasy.com). DO NOT EDIT.
 */

import * as z from "zod/v4-mini";
import { remap as remap$ } from "../lib/primitives.js";
import { safeParse } from "../lib/schemas.js";
import { ClosedEnum } from "../types/enums.js";
import { Result as SafeParseResult } from "../types/fp.js";
import * as types from "../types/primitives.js";
import { smartUnion } from "../types/smart-union.js";
import { SDKValidationError } from "./sdk-validation-error.js";

export type PreviewAttachGlobals = {
  xApiVersion?: string | undefined;
};

export type PreviewAttachFeatureQuantity = {
  featureId: string;
  quantity?: number | undefined;
  adjustable?: boolean | undefined;
};

export const PreviewAttachDurationType = {
  Day: "day",
  Month: "month",
  Year: "year",
} as const;
export type PreviewAttachDurationType = ClosedEnum<
  typeof PreviewAttachDurationType
>;

export type PreviewAttachFreeTrial = {
  durationLength: number;
  durationType?: PreviewAttachDurationType | undefined;
  cardRequired?: boolean | undefined;
};

export const PreviewAttachPriceInterval = {
  OneOff: "one_off",
  Week: "week",
  Month: "month",
  Quarter: "quarter",
  SemiAnnual: "semi_annual",
  Year: "year",
} as const;
export type PreviewAttachPriceInterval = ClosedEnum<
  typeof PreviewAttachPriceInterval
>;

export type PreviewAttachPrice = {
  amount: number;
  interval: PreviewAttachPriceInterval;
  intervalCount?: number | undefined;
};

export const PreviewAttachResetInterval = {
  OneOff: "one_off",
  Minute: "minute",
  Hour: "hour",
  Day: "day",
  Week: "week",
  Month: "month",
  Quarter: "quarter",
  SemiAnnual: "semi_annual",
  Year: "year",
} as const;
export type PreviewAttachResetInterval = ClosedEnum<
  typeof PreviewAttachResetInterval
>;

export type PreviewAttachReset = {
  interval: PreviewAttachResetInterval;
  intervalCount?: number | undefined;
};

export type PreviewAttachTo = number | string;

export type PreviewAttachTier = {
  to: number | string;
  amount: number;
};

export const PreviewAttachItemPriceInterval = {
  OneOff: "one_off",
  Week: "week",
  Month: "month",
  Quarter: "quarter",
  SemiAnnual: "semi_annual",
  Year: "year",
} as const;
export type PreviewAttachItemPriceInterval = ClosedEnum<
  typeof PreviewAttachItemPriceInterval
>;

export const PreviewAttachBillingMethod = {
  Prepaid: "prepaid",
  UsageBased: "usage_based",
} as const;
export type PreviewAttachBillingMethod = ClosedEnum<
  typeof PreviewAttachBillingMethod
>;

export type PreviewAttachItemPrice = {
  amount?: number | undefined;
  tiers?: Array<PreviewAttachTier> | undefined;
  interval: PreviewAttachItemPriceInterval;
  intervalCount?: number | undefined;
  billingUnits?: number | undefined;
  billingMethod: PreviewAttachBillingMethod;
  maxPurchase?: number | undefined;
};

export const PreviewAttachOnIncrease = {
  BillImmediately: "bill_immediately",
  ProrateImmediately: "prorate_immediately",
  ProrateNextCycle: "prorate_next_cycle",
  BillNextCycle: "bill_next_cycle",
} as const;
export type PreviewAttachOnIncrease = ClosedEnum<
  typeof PreviewAttachOnIncrease
>;

export const PreviewAttachOnDecrease = {
  Prorate: "prorate",
  ProrateImmediately: "prorate_immediately",
  ProrateNextCycle: "prorate_next_cycle",
  None: "none",
  NoProrations: "no_prorations",
} as const;
export type PreviewAttachOnDecrease = ClosedEnum<
  typeof PreviewAttachOnDecrease
>;

export type PreviewAttachProration = {
  onIncrease: PreviewAttachOnIncrease;
  onDecrease: PreviewAttachOnDecrease;
};

export const PreviewAttachExpiryDurationType = {
  Month: "month",
  Forever: "forever",
} as const;
export type PreviewAttachExpiryDurationType = ClosedEnum<
  typeof PreviewAttachExpiryDurationType
>;

export type PreviewAttachRollover = {
  max?: number | undefined;
  expiryDurationType: PreviewAttachExpiryDurationType;
  expiryDurationLength?: number | undefined;
};

export type PreviewAttachItem = {
  featureId: string;
  included?: number | undefined;
  unlimited?: boolean | undefined;
  reset?: PreviewAttachReset | undefined;
  price?: PreviewAttachItemPrice | undefined;
  proration?: PreviewAttachProration | undefined;
  rollover?: PreviewAttachRollover | undefined;
};

/**
 * Customize the plan to attach. Can either override the price of the plan, the items in the plan, or both.
 */
export type PreviewAttachCustomize = {
  price?: PreviewAttachPrice | null | undefined;
  items?: Array<PreviewAttachItem> | undefined;
};

/**
 * Invoice mode creates a draft or open invoice and sends it to the customer, instead of charging their card immediately. This uses Stripe's send_invoice collection method.
 */
export type PreviewAttachInvoiceMode = {
  /**
   * When true, creates an invoice and sends it to the customer instead of charging their card immediately. Uses Stripe's send_invoice collection method.
   */
  enabled: boolean;
  /**
   * If true, enables the plan immediately even though the invoice is not paid yet.
   */
  enablePlanImmediately?: boolean | undefined;
  /**
   * If true, finalizes the invoice so it can be sent to the customer. If false, keeps it as a draft for manual review.
   */
  finalize?: boolean | undefined;
};

/**
 * How to handle billing when updating an existing subscription. 'prorate_immediately' charges/credits prorated amounts now, 'next_cycle_only' skips creating any charges and applies the change at the next billing cycle.
 */
export const PreviewAttachBillingBehavior = {
  ProrateImmediately: "prorate_immediately",
  NextCycleOnly: "next_cycle_only",
} as const;
/**
 * How to handle billing when updating an existing subscription. 'prorate_immediately' charges/credits prorated amounts now, 'next_cycle_only' skips creating any charges and applies the change at the next billing cycle.
 */
export type PreviewAttachBillingBehavior = ClosedEnum<
  typeof PreviewAttachBillingBehavior
>;

export type PreviewAttachDiscountRequest2 = {
  /**
   * The promotion code to apply as a discount.
   */
  promotionCode: string;
};

export type PreviewAttachDiscountRequest1 = {
  /**
   * The ID of the reward to apply as a discount.
   */
  rewardId: string;
};

/**
 * A discount to apply. Can be either a reward ID or a promotion code.
 */
export type PreviewAttachDiscountUnion =
  | PreviewAttachDiscountRequest1
  | PreviewAttachDiscountRequest2;

/**
 * When the plan change should take effect. 'immediate' applies now, 'end_of_cycle' schedules for the end of the current billing cycle. By default, upgrades are immediate and downgrades are scheduled.
 */
export const PreviewAttachPlanSchedule = {
  Immediate: "immediate",
  EndOfCycle: "end_of_cycle",
} as const;
/**
 * When the plan change should take effect. 'immediate' applies now, 'end_of_cycle' schedules for the end of the current billing cycle. By default, upgrades are immediate and downgrades are scheduled.
 */
export type PreviewAttachPlanSchedule = ClosedEnum<
  typeof PreviewAttachPlanSchedule
>;

export type PreviewAttachParams = {
  /**
   * The ID of the customer to attach the plan to.
   */
  customerId: string;
  /**
   * The ID of the entity to attach the plan to.
   */
  entityId?: string | undefined;
  /**
   * The ID of the plan.
   */
  planId: string;
  /**
   * If this plan contains prepaid features, use this field to specify the quantity of each prepaid feature. This quantity includes the included amount and billing units defined when setting up the plan.
   */
  featureQuantities?: Array<PreviewAttachFeatureQuantity> | undefined;
  /**
   * The version of the plan to attach.
   */
  version?: number | undefined;
  /**
   * Override the plan's default free trial. Pass an object to set a custom trial, or null to remove the trial entirely.
   */
  freeTrial?: PreviewAttachFreeTrial | null | undefined;
  /**
   * Customize the plan to attach. Can either override the price of the plan, the items in the plan, or both.
   */
  customize?: PreviewAttachCustomize | undefined;
  /**
   * Invoice mode creates a draft or open invoice and sends it to the customer, instead of charging their card immediately. This uses Stripe's send_invoice collection method.
   */
  invoiceMode?: PreviewAttachInvoiceMode | undefined;
  /**
   * How to handle billing when updating an existing subscription. 'prorate_immediately' charges/credits prorated amounts now, 'next_cycle_only' skips creating any charges and applies the change at the next billing cycle.
   */
  billingBehavior?: PreviewAttachBillingBehavior | undefined;
  /**
   * List of discounts to apply. Each discount can be an Autumn reward ID, Stripe coupon ID, or Stripe promotion code.
   */
  discounts?:
    | Array<PreviewAttachDiscountRequest1 | PreviewAttachDiscountRequest2>
    | undefined;
  /**
   * URL to redirect to after successful checkout.
   */
  successUrl?: string | undefined;
  /**
   * Only applicable when the customer has an existing Stripe subscription. If true, creates a new separate subscription instead of merging into the existing one.
   */
  newBillingSubscription?: boolean | undefined;
  /**
   * When the plan change should take effect. 'immediate' applies now, 'end_of_cycle' schedules for the end of the current billing cycle. By default, upgrades are immediate and downgrades are scheduled.
   */
  planSchedule?: PreviewAttachPlanSchedule | undefined;
};

export type PreviewAttachDiscountResponse = {
  amountOff: number;
  percentOff?: number | undefined;
  stripeCouponId?: string | undefined;
  couponName?: string | undefined;
};

export type PreviewAttachLineItem = {
  /**
   * The title of the line item.
   */
  title: string;
  /**
   * A detailed description of the line item.
   */
  description: string;
  /**
   * The amount in cents for this line item.
   */
  amount: number;
  /**
   * List of discounts applied to this line item.
   */
  discounts?: Array<PreviewAttachDiscountResponse> | undefined;
};

/**
 * Preview of the next billing cycle, if applicable. This shows what the customer will be charged in subsequent cycles.
 */
export type PreviewAttachNextCycle = {
  /**
   * Unix timestamp (milliseconds) when the next billing cycle starts.
   */
  startsAt: number;
  /**
   * The total amount in cents for the next cycle.
   */
  total: number;
};

/**
 * OK
 */
export type PreviewAttachResponse = {
  /**
   * The ID of the customer.
   */
  customerId: string;
  /**
   * List of line items for the current billing period.
   */
  lineItems: Array<PreviewAttachLineItem>;
  /**
   * The total amount in cents for the current billing period.
   */
  total: number;
  /**
   * The three-letter ISO currency code (e.g., 'usd').
   */
  currency: string;
  /**
   * Preview of the next billing cycle, if applicable. This shows what the customer will be charged in subsequent cycles.
   */
  nextCycle?: PreviewAttachNextCycle | undefined;
};

/** @internal */
export type PreviewAttachFeatureQuantity$Outbound = {
  feature_id: string;
  quantity?: number | undefined;
  adjustable?: boolean | undefined;
};

/** @internal */
export const PreviewAttachFeatureQuantity$outboundSchema: z.ZodMiniType<
  PreviewAttachFeatureQuantity$Outbound,
  PreviewAttachFeatureQuantity
> = z.pipe(
  z.object({
    featureId: z.string(),
    quantity: z.optional(z.number()),
    adjustable: z.optional(z.boolean()),
  }),
  z.transform((v) => {
    return remap$(v, {
      featureId: "feature_id",
    });
  }),
);

export function previewAttachFeatureQuantityToJSON(
  previewAttachFeatureQuantity: PreviewAttachFeatureQuantity,
): string {
  return JSON.stringify(
    PreviewAttachFeatureQuantity$outboundSchema.parse(
      previewAttachFeatureQuantity,
    ),
  );
}

/** @internal */
export const PreviewAttachDurationType$outboundSchema: z.ZodMiniEnum<
  typeof PreviewAttachDurationType
> = z.enum(PreviewAttachDurationType);

/** @internal */
export type PreviewAttachFreeTrial$Outbound = {
  duration_length: number;
  duration_type: string;
  card_required: boolean;
};

/** @internal */
export const PreviewAttachFreeTrial$outboundSchema: z.ZodMiniType<
  PreviewAttachFreeTrial$Outbound,
  PreviewAttachFreeTrial
> = z.pipe(
  z.object({
    durationLength: z.number(),
    durationType: z._default(PreviewAttachDurationType$outboundSchema, "month"),
    cardRequired: z._default(z.boolean(), true),
  }),
  z.transform((v) => {
    return remap$(v, {
      durationLength: "duration_length",
      durationType: "duration_type",
      cardRequired: "card_required",
    });
  }),
);

export function previewAttachFreeTrialToJSON(
  previewAttachFreeTrial: PreviewAttachFreeTrial,
): string {
  return JSON.stringify(
    PreviewAttachFreeTrial$outboundSchema.parse(previewAttachFreeTrial),
  );
}

/** @internal */
export const PreviewAttachPriceInterval$outboundSchema: z.ZodMiniEnum<
  typeof PreviewAttachPriceInterval
> = z.enum(PreviewAttachPriceInterval);

/** @internal */
export type PreviewAttachPrice$Outbound = {
  amount: number;
  interval: string;
  interval_count?: number | undefined;
};

/** @internal */
export const PreviewAttachPrice$outboundSchema: z.ZodMiniType<
  PreviewAttachPrice$Outbound,
  PreviewAttachPrice
> = z.pipe(
  z.object({
    amount: z.number(),
    interval: PreviewAttachPriceInterval$outboundSchema,
    intervalCount: z.optional(z.number()),
  }),
  z.transform((v) => {
    return remap$(v, {
      intervalCount: "interval_count",
    });
  }),
);

export function previewAttachPriceToJSON(
  previewAttachPrice: PreviewAttachPrice,
): string {
  return JSON.stringify(
    PreviewAttachPrice$outboundSchema.parse(previewAttachPrice),
  );
}

/** @internal */
export const PreviewAttachResetInterval$outboundSchema: z.ZodMiniEnum<
  typeof PreviewAttachResetInterval
> = z.enum(PreviewAttachResetInterval);

/** @internal */
export type PreviewAttachReset$Outbound = {
  interval: string;
  interval_count?: number | undefined;
};

/** @internal */
export const PreviewAttachReset$outboundSchema: z.ZodMiniType<
  PreviewAttachReset$Outbound,
  PreviewAttachReset
> = z.pipe(
  z.object({
    interval: PreviewAttachResetInterval$outboundSchema,
    intervalCount: z.optional(z.number()),
  }),
  z.transform((v) => {
    return remap$(v, {
      intervalCount: "interval_count",
    });
  }),
);

export function previewAttachResetToJSON(
  previewAttachReset: PreviewAttachReset,
): string {
  return JSON.stringify(
    PreviewAttachReset$outboundSchema.parse(previewAttachReset),
  );
}

/** @internal */
export type PreviewAttachTo$Outbound = number | string;

/** @internal */
export const PreviewAttachTo$outboundSchema: z.ZodMiniType<
  PreviewAttachTo$Outbound,
  PreviewAttachTo
> = smartUnion([z.number(), z.string()]);

export function previewAttachToToJSON(
  previewAttachTo: PreviewAttachTo,
): string {
  return JSON.stringify(PreviewAttachTo$outboundSchema.parse(previewAttachTo));
}

/** @internal */
export type PreviewAttachTier$Outbound = {
  to: number | string;
  amount: number;
};

/** @internal */
export const PreviewAttachTier$outboundSchema: z.ZodMiniType<
  PreviewAttachTier$Outbound,
  PreviewAttachTier
> = z.object({
  to: smartUnion([z.number(), z.string()]),
  amount: z.number(),
});

export function previewAttachTierToJSON(
  previewAttachTier: PreviewAttachTier,
): string {
  return JSON.stringify(
    PreviewAttachTier$outboundSchema.parse(previewAttachTier),
  );
}

/** @internal */
export const PreviewAttachItemPriceInterval$outboundSchema: z.ZodMiniEnum<
  typeof PreviewAttachItemPriceInterval
> = z.enum(PreviewAttachItemPriceInterval);

/** @internal */
export const PreviewAttachBillingMethod$outboundSchema: z.ZodMiniEnum<
  typeof PreviewAttachBillingMethod
> = z.enum(PreviewAttachBillingMethod);

/** @internal */
export type PreviewAttachItemPrice$Outbound = {
  amount?: number | undefined;
  tiers?: Array<PreviewAttachTier$Outbound> | undefined;
  interval: string;
  interval_count: number;
  billing_units: number;
  billing_method: string;
  max_purchase?: number | undefined;
};

/** @internal */
export const PreviewAttachItemPrice$outboundSchema: z.ZodMiniType<
  PreviewAttachItemPrice$Outbound,
  PreviewAttachItemPrice
> = z.pipe(
  z.object({
    amount: z.optional(z.number()),
    tiers: z.optional(z.array(z.lazy(() => PreviewAttachTier$outboundSchema))),
    interval: PreviewAttachItemPriceInterval$outboundSchema,
    intervalCount: z._default(z.number(), 1),
    billingUnits: z._default(z.number(), 1),
    billingMethod: PreviewAttachBillingMethod$outboundSchema,
    maxPurchase: z.optional(z.number()),
  }),
  z.transform((v) => {
    return remap$(v, {
      intervalCount: "interval_count",
      billingUnits: "billing_units",
      billingMethod: "billing_method",
      maxPurchase: "max_purchase",
    });
  }),
);

export function previewAttachItemPriceToJSON(
  previewAttachItemPrice: PreviewAttachItemPrice,
): string {
  return JSON.stringify(
    PreviewAttachItemPrice$outboundSchema.parse(previewAttachItemPrice),
  );
}

/** @internal */
export const PreviewAttachOnIncrease$outboundSchema: z.ZodMiniEnum<
  typeof PreviewAttachOnIncrease
> = z.enum(PreviewAttachOnIncrease);

/** @internal */
export const PreviewAttachOnDecrease$outboundSchema: z.ZodMiniEnum<
  typeof PreviewAttachOnDecrease
> = z.enum(PreviewAttachOnDecrease);

/** @internal */
export type PreviewAttachProration$Outbound = {
  on_increase: string;
  on_decrease: string;
};

/** @internal */
export const PreviewAttachProration$outboundSchema: z.ZodMiniType<
  PreviewAttachProration$Outbound,
  PreviewAttachProration
> = z.pipe(
  z.object({
    onIncrease: PreviewAttachOnIncrease$outboundSchema,
    onDecrease: PreviewAttachOnDecrease$outboundSchema,
  }),
  z.transform((v) => {
    return remap$(v, {
      onIncrease: "on_increase",
      onDecrease: "on_decrease",
    });
  }),
);

export function previewAttachProrationToJSON(
  previewAttachProration: PreviewAttachProration,
): string {
  return JSON.stringify(
    PreviewAttachProration$outboundSchema.parse(previewAttachProration),
  );
}

/** @internal */
export const PreviewAttachExpiryDurationType$outboundSchema: z.ZodMiniEnum<
  typeof PreviewAttachExpiryDurationType
> = z.enum(PreviewAttachExpiryDurationType);

/** @internal */
export type PreviewAttachRollover$Outbound = {
  max?: number | undefined;
  expiry_duration_type: string;
  expiry_duration_length?: number | undefined;
};

/** @internal */
export const PreviewAttachRollover$outboundSchema: z.ZodMiniType<
  PreviewAttachRollover$Outbound,
  PreviewAttachRollover
> = z.pipe(
  z.object({
    max: z.optional(z.number()),
    expiryDurationType: PreviewAttachExpiryDurationType$outboundSchema,
    expiryDurationLength: z.optional(z.number()),
  }),
  z.transform((v) => {
    return remap$(v, {
      expiryDurationType: "expiry_duration_type",
      expiryDurationLength: "expiry_duration_length",
    });
  }),
);

export function previewAttachRolloverToJSON(
  previewAttachRollover: PreviewAttachRollover,
): string {
  return JSON.stringify(
    PreviewAttachRollover$outboundSchema.parse(previewAttachRollover),
  );
}

/** @internal */
export type PreviewAttachItem$Outbound = {
  feature_id: string;
  included?: number | undefined;
  unlimited?: boolean | undefined;
  reset?: PreviewAttachReset$Outbound | undefined;
  price?: PreviewAttachItemPrice$Outbound | undefined;
  proration?: PreviewAttachProration$Outbound | undefined;
  rollover?: PreviewAttachRollover$Outbound | undefined;
};

/** @internal */
export const PreviewAttachItem$outboundSchema: z.ZodMiniType<
  PreviewAttachItem$Outbound,
  PreviewAttachItem
> = z.pipe(
  z.object({
    featureId: z.string(),
    included: z.optional(z.number()),
    unlimited: z.optional(z.boolean()),
    reset: z.optional(z.lazy(() => PreviewAttachReset$outboundSchema)),
    price: z.optional(z.lazy(() => PreviewAttachItemPrice$outboundSchema)),
    proration: z.optional(z.lazy(() => PreviewAttachProration$outboundSchema)),
    rollover: z.optional(z.lazy(() => PreviewAttachRollover$outboundSchema)),
  }),
  z.transform((v) => {
    return remap$(v, {
      featureId: "feature_id",
    });
  }),
);

export function previewAttachItemToJSON(
  previewAttachItem: PreviewAttachItem,
): string {
  return JSON.stringify(
    PreviewAttachItem$outboundSchema.parse(previewAttachItem),
  );
}

/** @internal */
export type PreviewAttachCustomize$Outbound = {
  price?: PreviewAttachPrice$Outbound | null | undefined;
  items?: Array<PreviewAttachItem$Outbound> | undefined;
};

/** @internal */
export const PreviewAttachCustomize$outboundSchema: z.ZodMiniType<
  PreviewAttachCustomize$Outbound,
  PreviewAttachCustomize
> = z.object({
  price: z.optional(
    z.nullable(z.lazy(() => PreviewAttachPrice$outboundSchema)),
  ),
  items: z.optional(z.array(z.lazy(() => PreviewAttachItem$outboundSchema))),
});

export function previewAttachCustomizeToJSON(
  previewAttachCustomize: PreviewAttachCustomize,
): string {
  return JSON.stringify(
    PreviewAttachCustomize$outboundSchema.parse(previewAttachCustomize),
  );
}

/** @internal */
export type PreviewAttachInvoiceMode$Outbound = {
  enabled: boolean;
  enable_plan_immediately: boolean;
  finalize: boolean;
};

/** @internal */
export const PreviewAttachInvoiceMode$outboundSchema: z.ZodMiniType<
  PreviewAttachInvoiceMode$Outbound,
  PreviewAttachInvoiceMode
> = z.pipe(
  z.object({
    enabled: z.boolean(),
    enablePlanImmediately: z._default(z.boolean(), false),
    finalize: z._default(z.boolean(), true),
  }),
  z.transform((v) => {
    return remap$(v, {
      enablePlanImmediately: "enable_plan_immediately",
    });
  }),
);

export function previewAttachInvoiceModeToJSON(
  previewAttachInvoiceMode: PreviewAttachInvoiceMode,
): string {
  return JSON.stringify(
    PreviewAttachInvoiceMode$outboundSchema.parse(previewAttachInvoiceMode),
  );
}

/** @internal */
export const PreviewAttachBillingBehavior$outboundSchema: z.ZodMiniEnum<
  typeof PreviewAttachBillingBehavior
> = z.enum(PreviewAttachBillingBehavior);

/** @internal */
export type PreviewAttachDiscountRequest2$Outbound = {
  promotion_code: string;
};

/** @internal */
export const PreviewAttachDiscountRequest2$outboundSchema: z.ZodMiniType<
  PreviewAttachDiscountRequest2$Outbound,
  PreviewAttachDiscountRequest2
> = z.pipe(
  z.object({
    promotionCode: z.string(),
  }),
  z.transform((v) => {
    return remap$(v, {
      promotionCode: "promotion_code",
    });
  }),
);

export function previewAttachDiscountRequest2ToJSON(
  previewAttachDiscountRequest2: PreviewAttachDiscountRequest2,
): string {
  return JSON.stringify(
    PreviewAttachDiscountRequest2$outboundSchema.parse(
      previewAttachDiscountRequest2,
    ),
  );
}

/** @internal */
export type PreviewAttachDiscountRequest1$Outbound = {
  reward_id: string;
};

/** @internal */
export const PreviewAttachDiscountRequest1$outboundSchema: z.ZodMiniType<
  PreviewAttachDiscountRequest1$Outbound,
  PreviewAttachDiscountRequest1
> = z.pipe(
  z.object({
    rewardId: z.string(),
  }),
  z.transform((v) => {
    return remap$(v, {
      rewardId: "reward_id",
    });
  }),
);

export function previewAttachDiscountRequest1ToJSON(
  previewAttachDiscountRequest1: PreviewAttachDiscountRequest1,
): string {
  return JSON.stringify(
    PreviewAttachDiscountRequest1$outboundSchema.parse(
      previewAttachDiscountRequest1,
    ),
  );
}

/** @internal */
export type PreviewAttachDiscountUnion$Outbound =
  | PreviewAttachDiscountRequest1$Outbound
  | PreviewAttachDiscountRequest2$Outbound;

/** @internal */
export const PreviewAttachDiscountUnion$outboundSchema: z.ZodMiniType<
  PreviewAttachDiscountUnion$Outbound,
  PreviewAttachDiscountUnion
> = smartUnion([
  z.lazy(() => PreviewAttachDiscountRequest1$outboundSchema),
  z.lazy(() => PreviewAttachDiscountRequest2$outboundSchema),
]);

export function previewAttachDiscountUnionToJSON(
  previewAttachDiscountUnion: PreviewAttachDiscountUnion,
): string {
  return JSON.stringify(
    PreviewAttachDiscountUnion$outboundSchema.parse(previewAttachDiscountUnion),
  );
}

/** @internal */
export const PreviewAttachPlanSchedule$outboundSchema: z.ZodMiniEnum<
  typeof PreviewAttachPlanSchedule
> = z.enum(PreviewAttachPlanSchedule);

/** @internal */
export type PreviewAttachParams$Outbound = {
  customer_id: string;
  entity_id?: string | undefined;
  plan_id: string;
  feature_quantities?: Array<PreviewAttachFeatureQuantity$Outbound> | undefined;
  version?: number | undefined;
  free_trial?: PreviewAttachFreeTrial$Outbound | null | undefined;
  customize?: PreviewAttachCustomize$Outbound | undefined;
  invoice_mode?: PreviewAttachInvoiceMode$Outbound | undefined;
  billing_behavior?: string | undefined;
  discounts?:
    | Array<
      | PreviewAttachDiscountRequest1$Outbound
      | PreviewAttachDiscountRequest2$Outbound
    >
    | undefined;
  success_url?: string | undefined;
  new_billing_subscription?: boolean | undefined;
  plan_schedule?: string | undefined;
};

/** @internal */
export const PreviewAttachParams$outboundSchema: z.ZodMiniType<
  PreviewAttachParams$Outbound,
  PreviewAttachParams
> = z.pipe(
  z.object({
    customerId: z.string(),
    entityId: z.optional(z.string()),
    planId: z.string(),
    featureQuantities: z.optional(
      z.array(z.lazy(() => PreviewAttachFeatureQuantity$outboundSchema)),
    ),
    version: z.optional(z.number()),
    freeTrial: z.optional(
      z.nullable(z.lazy(() => PreviewAttachFreeTrial$outboundSchema)),
    ),
    customize: z.optional(z.lazy(() => PreviewAttachCustomize$outboundSchema)),
    invoiceMode: z.optional(
      z.lazy(() => PreviewAttachInvoiceMode$outboundSchema),
    ),
    billingBehavior: z.optional(PreviewAttachBillingBehavior$outboundSchema),
    discounts: z.optional(z.array(smartUnion([
      z.lazy(() => PreviewAttachDiscountRequest1$outboundSchema),
      z.lazy(() =>
        PreviewAttachDiscountRequest2$outboundSchema
      ),
    ]))),
    successUrl: z.optional(z.string()),
    newBillingSubscription: z.optional(z.boolean()),
    planSchedule: z.optional(PreviewAttachPlanSchedule$outboundSchema),
  }),
  z.transform((v) => {
    return remap$(v, {
      customerId: "customer_id",
      entityId: "entity_id",
      planId: "plan_id",
      featureQuantities: "feature_quantities",
      freeTrial: "free_trial",
      invoiceMode: "invoice_mode",
      billingBehavior: "billing_behavior",
      successUrl: "success_url",
      newBillingSubscription: "new_billing_subscription",
      planSchedule: "plan_schedule",
    });
  }),
);

export function previewAttachParamsToJSON(
  previewAttachParams: PreviewAttachParams,
): string {
  return JSON.stringify(
    PreviewAttachParams$outboundSchema.parse(previewAttachParams),
  );
}

/** @internal */
export const PreviewAttachDiscountResponse$inboundSchema: z.ZodMiniType<
  PreviewAttachDiscountResponse,
  unknown
> = z.object({
  amountOff: types.number(),
  percentOff: types.optional(types.number()),
  stripeCouponId: types.optional(types.string()),
  couponName: types.optional(types.string()),
});

export function previewAttachDiscountResponseFromJSON(
  jsonString: string,
): SafeParseResult<PreviewAttachDiscountResponse, SDKValidationError> {
  return safeParse(
    jsonString,
    (x) => PreviewAttachDiscountResponse$inboundSchema.parse(JSON.parse(x)),
    `Failed to parse 'PreviewAttachDiscountResponse' from JSON`,
  );
}

/** @internal */
export const PreviewAttachLineItem$inboundSchema: z.ZodMiniType<
  PreviewAttachLineItem,
  unknown
> = z.object({
  title: types.string(),
  description: types.string(),
  amount: types.number(),
  discounts: types.optional(
    z.array(z.lazy(() => PreviewAttachDiscountResponse$inboundSchema)),
  ),
});

export function previewAttachLineItemFromJSON(
  jsonString: string,
): SafeParseResult<PreviewAttachLineItem, SDKValidationError> {
  return safeParse(
    jsonString,
    (x) => PreviewAttachLineItem$inboundSchema.parse(JSON.parse(x)),
    `Failed to parse 'PreviewAttachLineItem' from JSON`,
  );
}

/** @internal */
export const PreviewAttachNextCycle$inboundSchema: z.ZodMiniType<
  PreviewAttachNextCycle,
  unknown
> = z.pipe(
  z.object({
    starts_at: types.number(),
    total: types.number(),
  }),
  z.transform((v) => {
    return remap$(v, {
      "starts_at": "startsAt",
    });
  }),
);

export function previewAttachNextCycleFromJSON(
  jsonString: string,
): SafeParseResult<PreviewAttachNextCycle, SDKValidationError> {
  return safeParse(
    jsonString,
    (x) => PreviewAttachNextCycle$inboundSchema.parse(JSON.parse(x)),
    `Failed to parse 'PreviewAttachNextCycle' from JSON`,
  );
}

/** @internal */
export const PreviewAttachResponse$inboundSchema: z.ZodMiniType<
  PreviewAttachResponse,
  unknown
> = z.pipe(
  z.object({
    customer_id: types.string(),
    line_items: z.array(z.lazy(() => PreviewAttachLineItem$inboundSchema)),
    total: types.number(),
    currency: types.string(),
    next_cycle: types.optional(
      z.lazy(() => PreviewAttachNextCycle$inboundSchema),
    ),
  }),
  z.transform((v) => {
    return remap$(v, {
      "customer_id": "customerId",
      "line_items": "lineItems",
      "next_cycle": "nextCycle",
    });
  }),
);

export function previewAttachResponseFromJSON(
  jsonString: string,
): SafeParseResult<PreviewAttachResponse, SDKValidationError> {
  return safeParse(
    jsonString,
    (x) => PreviewAttachResponse$inboundSchema.parse(JSON.parse(x)),
    `Failed to parse 'PreviewAttachResponse' from JSON`,
  );
}
