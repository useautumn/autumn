/*
 * Code generated by Speakeasy (https://speakeasy.com). DO NOT EDIT.
 */

import * as z from "zod/v4-mini";
import { remap as remap$ } from "../lib/primitives.js";
import {
  CustomerExpand,
  CustomerExpand$outboundSchema,
} from "./customer-expand.js";

export type GetOrCreateCustomerGlobals = {
  xApiVersion?: string | undefined;
};

export type GetOrCreateCustomerParams = {
  customerId: string | null;
  /**
   * Customer's name
   */
  name?: string | null | undefined;
  /**
   * Customer's email address
   */
  email?: string | null | undefined;
  /**
   * Unique identifier (eg, serial number) to detect duplicate customers and prevent free trial abuse
   */
  fingerprint?: string | null | undefined;
  /**
   * Additional metadata for the customer
   */
  metadata?: { [k: string]: any } | null | undefined;
  /**
   * Stripe customer ID if you already have one
   */
  stripeId?: string | null | undefined;
  /**
   * Whether to create the customer in Stripe
   */
  createInStripe?: boolean | undefined;
  /**
   * The ID of the free plan to auto-enable for the customer
   */
  autoEnablePlanId?: string | undefined;
  /**
   * Whether to send email receipts to this customer
   */
  sendEmailReceipts?: boolean | undefined;
  /**
   * Customer expand options
   */
  expand?: Array<CustomerExpand> | undefined;
};

/** @internal */
export type GetOrCreateCustomerParams$Outbound = {
  customer_id: string | null;
  name?: string | null | undefined;
  email?: string | null | undefined;
  fingerprint?: string | null | undefined;
  metadata?: { [k: string]: any } | null | undefined;
  stripe_id?: string | null | undefined;
  create_in_stripe?: boolean | undefined;
  auto_enable_plan_id?: string | undefined;
  send_email_receipts?: boolean | undefined;
  expand?: Array<string> | undefined;
};

/** @internal */
export const GetOrCreateCustomerParams$outboundSchema: z.ZodMiniType<
  GetOrCreateCustomerParams$Outbound,
  GetOrCreateCustomerParams
> = z.pipe(
  z.object({
    customerId: z.nullable(z.string()),
    name: z.optional(z.nullable(z.string())),
    email: z.optional(z.nullable(z.string())),
    fingerprint: z.optional(z.nullable(z.string())),
    metadata: z.optional(z.nullable(z.record(z.string(), z.any()))),
    stripeId: z.optional(z.nullable(z.string())),
    createInStripe: z.optional(z.boolean()),
    autoEnablePlanId: z.optional(z.string()),
    sendEmailReceipts: z.optional(z.boolean()),
    expand: z.optional(z.array(CustomerExpand$outboundSchema)),
  }),
  z.transform((v) => {
    return remap$(v, {
      customerId: "customer_id",
      stripeId: "stripe_id",
      createInStripe: "create_in_stripe",
      autoEnablePlanId: "auto_enable_plan_id",
      sendEmailReceipts: "send_email_receipts",
    });
  }),
);

export function getOrCreateCustomerParamsToJSON(
  getOrCreateCustomerParams: GetOrCreateCustomerParams,
): string {
  return JSON.stringify(
    GetOrCreateCustomerParams$outboundSchema.parse(getOrCreateCustomerParams),
  );
}
